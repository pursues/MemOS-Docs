---
title: æ„å»ºæ‹¥æœ‰è®°å¿†çš„å®¶åº­ç”Ÿæ´»åŠ©æ‰‹
---

# æ¦‚è¿°

åœ¨åšå®¶åº­ç”Ÿæ´»åŠ©æ‰‹è¿™ç±»äº§å“æ—¶ï¼Œå¼€å‘è€…ç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š**å¯¹è¯ä¸Šä¸‹æ–‡ä¸€æ—¦ç»“æŸï¼Œç”¨æˆ·ä¿¡æ¯å°±ä¸¢å¤±äº†**ã€‚

*   ç”¨æˆ·éšå£äº¤ä»£çš„å¾…åŠï¼ˆã€Œå‘¨å…­è¦å¸¦å­©å­å»åŠ¨ç‰©å›­ã€ï¼‰
    
*   ç”¨æˆ·è¡¨è¾¾çš„ä¹ æƒ¯ï¼ˆã€Œæé†’æ—¶è¦å…ˆåˆ—è¦ç‚¹ï¼Œå†ç»™ä¸€å¥è¡ŒåŠ¨å»ºè®®ã€ï¼‰
    
*   ç”¨æˆ·ä»‹ç»çš„å®¶åº­æƒ…å†µï¼ˆã€Œæˆ‘å¤ªå¤ªå«å°èŠ¸ï¼Œå­©å­Â 6Â å²ã€ï¼‰
    

å¦‚æœåŠ©æ‰‹ä¸èƒ½è®°ä½è¿™äº›ä¿¡æ¯ï¼Œå°±ä¼šæ˜¾å¾—ã€Œæ²¡å¿ƒæ²¡è‚ºã€ï¼šç”¨æˆ·ç¬¬äºŒå¤©å†é—®ã€Œæˆ‘å‘¨æœ«å®‰æ’äº†å•¥ï¼Ÿã€æ—¶ï¼ŒåŠ©æ‰‹å®Œå…¨ä¸çŸ¥é“åœ¨è¯´ä»€ä¹ˆã€‚

## ä¸ºä»€ä¹ˆä¸ç”¨ä¼ ç»ŸÂ RAGï¼Ÿ

å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼šèƒ½ä¸èƒ½ç”¨Â RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼Ÿ  
ä½†ä¼ ç»ŸÂ RAGÂ çš„ç‰¹ç‚¹å†³å®šäº†å®ƒå¹¶ä¸é€‚åˆè¿™ç§ã€Œä¸ªæ€§åŒ–åŠ©æ‰‹ã€åœºæ™¯ï¼š

| ä¼ ç»ŸÂ RAG | MemOS |
| --- | --- |
| ä¾èµ–é™æ€çŸ¥è¯†åº“ï¼Œéœ€è¦äººå·¥ä¸æ–­ç»´æŠ¤æ–‡æ¡£ | å¯¹è¯ä¸­äº§ç”Ÿçš„ä¿¡æ¯å¯ç›´æ¥å†™å…¥ï¼Œæ— éœ€é¢å¤–ç»´æŠ¤ |
| åªèƒ½æœºæ¢°è¿”å›ç‰‡æ®µï¼Œä¸ä¼šè‡ªåŠ¨å­¦ä¹ åå¥½ | ä¼šéšå¯¹è¯è‡ªåŠ¨å½¢æˆå¾…åŠã€åå¥½ã€ç”»åƒç­‰è®°å¿† |
| é¢å‘â€œå…±æ€§çŸ¥è¯†â€ï¼Œä¸é€‚åˆå­˜å‚¨ä¸ªäººåŒ–ä¿¡æ¯ | ä¸“é—¨ä¸ºä¸ªä½“åŒ–åœºæ™¯è®¾è®¡ï¼Œæ”¯æŒé•¿æœŸè¿½è¸ªä¸è°ƒç”¨ |

## ä¸ºä»€ä¹ˆä¸è‡ªå·±é€ è½®å­ï¼Ÿ

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•è‡ªå·±å­˜å‚¨è¿™äº›ä¿¡æ¯ï¼Œä½†è¿™ä¼šå¸¦æ¥å‡ ä¸ªæŒ‘æˆ˜ï¼š

*   **å­˜å‚¨ä¸æ£€ç´¢é€»è¾‘å¤æ‚**ï¼šè¦åŒºåˆ†å¯¹è¯å†…å®¹ã€é•¿æœŸè®°å¿†ã€åå¥½å’Œäº‹å®ï¼Œå¹¶ä¿è¯éšæ—¶èƒ½æŒ‰éœ€æ£€ç´¢ã€‚
    
*   **å’Œå¤§æ¨¡å‹å¯¹æ¥éº»çƒ¦**ï¼šä¸ä»…è¦å­˜æ•°æ®ï¼Œè¿˜å¾—åœ¨ç”Ÿæˆå›ç­”å‰æŠŠç›¸å…³ä¿¡æ¯ã€Œæ‹¼è¿›Â Promptã€ã€‚
    
*   **å¯æ‰©å±•æ€§å·®**ï¼šéšç€åŠŸèƒ½å¢åŠ ï¼ˆå¾…åŠã€åå¥½ã€ç”»åƒï¼‰ï¼Œä»£ç ä¼šå˜å¾—è¶Šæ¥è¶Šéš¾ç»´æŠ¤ã€‚
    

## ä¸ºä»€ä¹ˆè¦ç”¨Â MemOSï¼Ÿ

åœ¨åšé€‰å‹æ—¶ï¼Œå¯ä»¥ç›´è§‚å¯¹æ¯”ä¸‰ç§æ–¹æ¡ˆï¼š

| æ–¹æ¡ˆ | ç‰¹ç‚¹ | å±€é™ | MemOSÂ çš„ä¼˜åŠ¿ |
| --- | --- | --- | --- |
| ä¼ ç»ŸÂ RAG | é€šè¿‡å‘é‡æ£€ç´¢çŸ¥è¯†åº“æ–‡æ¡£ï¼Œæ‹¼æ¥è¿›Â Prompt | éœ€è¦äººå·¥ç»´æŠ¤é™æ€æ–‡æ¡£ï¼›ä¸èƒ½å­˜å‚¨ä¸ªäººåŒ–å¾…åŠ/åå¥½ï¼›åªä¼šæœºæ¢°è¿”å›ç‰‡æ®µ | è‡ªåŠ¨æ•æ‰å¯¹è¯ä¸­çš„å…³é”®ä¿¡æ¯ï¼Œæ”¯æŒä¸ªæ€§åŒ–ã€åŠ¨æ€æ›´æ–° |
| è‡ªç ”å­˜å‚¨æ–¹æ¡ˆ | è‡ªå»ºè¡¨/ç¼“å­˜ï¼ŒæŠŠå¯¹è¯ä¿¡æ¯ä¿å­˜ä¸‹æ¥ | é€»è¾‘å¤æ‚ï¼šè¦åŒºåˆ†å¯¹è¯/é•¿æœŸè®°å¿†/åå¥½/ç”»åƒï¼›è°ƒç”¨æ¨¡å‹å‰è¿˜å¾—æ‰‹åŠ¨æ‹¼Â Promptï¼›åŠŸèƒ½æ‰©å±•éš¾ç»´æŠ¤ | MemOSÂ å°è£…å­˜å‚¨+æ£€ç´¢+PromptÂ æ³¨å…¥ï¼Œå‡å°‘å¼€å‘è´Ÿæ‹… |
| MemOS | ä¸¤ä¸ªæ¥å£å³å¯ï¼š`addMessage`Â å†™å…¥ã€`searchMemory`Â æ£€ç´¢ | â€”â€” | æ”¯æŒé•¿æœŸè¿½è¸ªã€åå¥½ä¿æŒã€ç”»åƒç»“åˆï¼›å¼€ç®±å³ç”¨ã€æ˜“æ‰©å±• |

åªéœ€è°ƒç”¨ä¸¤ä¸ªæ¥å£ï¼š

*   `addMessage`ï¼šæŠŠç”¨æˆ·æˆ–åŠ©æ‰‹çš„æ¶ˆæ¯å†™å…¥ç³»ç»Ÿã€‚
    
*   `searchMemory`ï¼šåœ¨æ¨¡å‹ç”Ÿæˆå›å¤å‰æ£€ç´¢ç›¸å…³è®°å¿†ï¼ŒæŠŠç»“æœæ‹¼è¿›Â Promptã€‚
    

è¿™æ ·ï¼ŒåŠ©æ‰‹å°±èƒ½è¡¨ç°å‡ºçœŸæ­£çš„â€œæœ‰è®°å¿†â€ï¼š

*   **è¿½è¸ªå¾…åŠ**
    
    *   ç”¨æˆ·è¯´ã€Œå‘¨å…­è¦å¸¦å­©å­å»åŠ¨ç‰©å›­ã€
        
    *   å‡ å¤©åé—®ã€Œæˆ‘å‘¨æœ«å®‰æ’äº†å•¥ï¼Ÿã€Â â†’Â èƒ½å‡†ç¡®å›ç­”
        
*   **ä¿æŒåå¥½**ï¼ˆæœªæ¥ç‰ˆæœ¬ä¼šæ”¯æŒæ›´ç²¾ç»†çš„æŒ‡ä»¤è¡¥å…¨ï¼‰
    
    *   ç”¨æˆ·è¯´ã€Œæé†’è¦å…ˆåˆ—è¦ç‚¹+ä¸€å¥è¯å»ºè®®ã€
        
    *   å†é—®ã€Œå¸®æˆ‘è§„åˆ’ä¸‹å‘¨å®¶åŠ¡åˆ†å·¥ã€Â â†’Â è¾“å‡ºä¿æŒåå¥½é£æ ¼
        
*   **ç»“åˆç”»åƒ**
    
    *   ç”¨æˆ·è¯´ã€Œæˆ‘å¤ªå¤ªå«å°èŠ¸ï¼Œå­©å­Â 6Â å²ã€
        
    *   å†é—®ã€Œå‘¨æœ«ç»™å®¶é‡Œå®‰æ’ä¸ªæ´»åŠ¨ï¼Ÿã€Â â†’Â ç»™å‡ºè´´åˆäº²å­å®¶åº­çš„æ´»åŠ¨æ–¹æ¡ˆ
        

## æœ¬æ¡ˆä¾‹ä¼šå±•ç¤ºä»€ä¹ˆï¼Ÿ

æˆ‘ä»¬å°†ç”¨Â MemOSÂ äº‘æœåŠ¡å¿«é€Ÿå®ç°ä¸€ä¸ªâ€œä¼šè®°ä½ç”¨æˆ·â€çš„å®¶åº­ç”Ÿæ´»åŠ©æ‰‹ã€‚  
åœ¨è¿è¡Œæ¡ˆä¾‹è„šæœ¬æ—¶ï¼Œå¼€å‘è€…èƒ½çœ‹åˆ°å®Œæ•´æ—¥å¿—ï¼š

*   æ¯æ¬¡è°ƒç”¨Â `addMessage`Â å’ŒÂ `searchMemory`Â çš„è¯·æ±‚/å“åº”
    
*   å‘½ä¸­çš„è®°å¿†æ¡ç›®
    
*   //Â æ‹¼æ¥æŒ‡ä»¤å’Œå®Œæ•´æŒ‡ä»¤Â Â â†Â TODO:Â å³å°†ä¸Šçº¿æ•¬è¯·æœŸå¾…
    
*   æ¨¡å‹ç”Ÿæˆçš„å›ç­”ï¼ˆæœªæ¥å…¥å¤§æ¨¡å‹æ—¶ä¼šæç¤ºã€æœªæ¥å…¥å¤§æ¨¡å‹ã€‘ï¼‰
    

# ç¤ºä¾‹

## ç¯å¢ƒå‡†å¤‡

ä½¿ç”¨pipå®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹

```shell
pip install MemoryOS -U
```

## å®Œæ•´ä»£ç 

```python
import os
from openai import OpenAI
from memos.api.client import MemOSClient

os.environ["MEMOS_API_KEY"] = "mpg-xx"
os.environ["OPEN_API_KEY"] = "sk-xx"


class HomeAssistant:    
    def __init__(self):
        self.memos_client = MemOSClient(api_key=os.getenv("MEMOS_API_KEY"))
        self.openai_client = OpenAI(api_key=os.getenv("OPEN_API_KEY"))
    
    def search_memories(self, query, user_id, conversation_id):
        response = self.memos_client.search(query, user_id, conversation_id)
        return [m['memoryValue'] for m in response.data.memoryDetailList]

    def add_messages(self, messages, user_id, conversation_id):
        self.memos_client.add(messages, user_id, conversation_id)

    def get_messages(self, user_id, conversation_id):
        response = self.memos_client.get_messages(user_id, conversation_id)
        
        return response.data.messageDetailList

    def build_system_prompt(self, memories):
        """æ„å»ºåŒ…å«æ ¼å¼åŒ–è®°å¿†çš„ç³»ç»Ÿæç¤º"""
        base_prompt = """
          ä½ æ˜¯ä¸€ä½çŸ¥è¯†ä¸°å¯Œã€è´´å¿ƒå‘¨åˆ°çš„å®¶åº­ç”Ÿæ´»åŠ©æ‰‹ã€‚
          ä½ å¯è°ƒç”¨å¯¹è¯è®°å¿†ï¼ŒåŠ©åŠ›æä¾›æ›´å…·ä¸ªæ€§åŒ–çš„å›å¤ã€‚
          è¯·å€ŸåŠ©è¿™äº›è®°å¿†ï¼Œç†è§£ç”¨æˆ·çš„åœºæ™¯èƒŒæ™¯ã€åå¥½å€¾å‘åŠè¿‡å¾€äº’åŠ¨æƒ…å†µã€‚
          è‹¥æä¾›äº†è®°å¿†å†…å®¹ï¼Œåœ¨ç›¸å…³æ—¶éœ€è‡ªç„¶å‚è€ƒå…¶ä¸­ä¿¡æ¯ï¼Œä½†æ— éœ€æ˜ç¡®æåŠè‡ªå·±æ‹¥æœ‰è®°å¿†åŠŸèƒ½ã€‚
        """

        if memories:
            # å°†è®°å¿†æ ¼å¼åŒ–ä¸ºç¼–å·åˆ—è¡¨
            formatted_memories = "## è®°å¿†:\n"
            for i, memory in enumerate(memories, 1):
                formatted_memories += f"{i}. {memory}\n"
            
            return f"{base_prompt}\n\n{formatted_memories}"
        else:
            return base_prompt
        

    def chat(self, query, user_id, conversation_id):
        """å¤„ç†åŒ…å«è®°å¿†é›†æˆçš„å¯¹è¯çš„ä¸»è¦èŠå¤©å‡½æ•°"""
        # 1. æœç´¢ç›¸å…³è®°å¿†
        memories = self.search_memories(query, user_id, conversation_id)
        
        print(f"======memories: {memories}")
        # æ„å»ºåŒ…å«è®°å¿†çš„ç³»ç»Ÿæç¤º
        system_prompt = self.build_system_prompt(memories)
        
        # 2. ä½¿ç”¨OpenAIç”Ÿæˆå›ç­”
        response = self.openai_client.chat.completions.create(
            model="gpt-4o",
            messages=[
                {"role": "system", "content": system_prompt},
                {"role": "user", "content": query}
            ]
        )
        answer = response.choices[0].message.content

        # 3. å°†å¯¹è¯ä¿å­˜åˆ°è®°å¿†ä¸­
        messages = [
            {"role": "user", "content": query},
            {"role": "assistant", "content": answer}
        ]
        self.memos_client.add(messages, user_id, conversation_id)
        
        return answer

ai_assistant = HomeAssistant()
user_id = "memos_home_management_user_1234"
conversation_id = "memos_home_management_conversation_1234"

def demo_questions():
    return [
      "å‘¨å…­è¦å¸¦å­©å­å»åŠ¨ç‰©å›­ï¼Œåˆ«å¿˜äº†",
      "æˆ‘å‘¨æœ«è¦åšä»€ä¹ˆï¼Ÿ",
      "è£…ä¿®æˆ¿å­æ—¶è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ"
    ]

def pre_configured_conversations():
    """è¿”å›é¢„é…ç½®çš„å¯¹è¯å¯¹"""
    return [
        {
            "user": "æˆ‘ä»¬å®¶è¦è£…ä¿®ï¼Œè®¡åˆ’ä¸‹ä¸ªæœˆå¼€å·¥ï¼Œé£æ ¼åå¥½ç®€çº¦é£ï¼Œé¢„ç®—ä¸è¶…è¿‡20ä¸‡",
            "description": "å®¶åº­è£…ä¿®è®¡åˆ’è®¾ç½®"
        },
        {
            "user": "æé†’æˆ‘å‘¨æœ«è¦å¯¹è£…ä¿®æ–¹æ¡ˆ",
            "description": "å‘¨æœ«è£…ä¿®æé†’"
        }
    ]

def execute_pre_conversations():
    """æ‰§è¡Œé¢„é…ç½®çš„å¯¹è¯"""
    conversations = pre_configured_conversations()
    
    print("\nğŸ”„ æ­£åœ¨æ‰§è¡Œé¢„é…ç½®å¯¹è¯...")
    print("=" * 60)
    
    for i, conv in enumerate(conversations, 1):
        print(f"\nğŸ’¬ å¯¹è¯ {i}: {conv['description']}")
        print(f"ğŸ‘¤ ç”¨æˆ·: {conv['user']}")
        
        # æ‰§è¡Œå¯¹è¯
        answer = ai_assistant.chat(conv['user'], user_id, conversation_id)
        print(f"ğŸ¤– åŠ©æ‰‹: {answer}")
        print("-" * 40)
    
    print("\nâœ… é¢„é…ç½®å¯¹è¯æ‰§è¡Œå®Œæ¯•ï¼")
    print("=" * 60)

def main():    
    print("ğŸ  æ¬¢è¿æŸ¥çœ‹MemOSåœ¨å®¶åº­åŠ©æ‰‹ä¸­çš„ä½¿ç”¨ç¤ºä¾‹ï¼")
    print("ğŸ’¡ åœ¨MemOSçš„åŠ æŒä¸‹ï¼Œè®©æ‚¨å¼€å‘çš„äº§å“å®ç°çœŸäººç®¡å®¶æ•ˆæœï¼ ğŸ˜Š \n")
    
    # è¯¢é—®ç”¨æˆ·æ˜¯å¦è¦å…ˆæ‰§è¡Œé¢„é…ç½®å¯¹è¯
    while True:
        pre_chat = input("ğŸ¤” æ‚¨æƒ³å…ˆæ‰§è¡Œé¢„é…ç½®å¯¹è¯å—ï¼Ÿé¢„è®¡æ¶ˆè€—2æ¬¡addå’Œ2æ¬¡searchçš„è°ƒç”¨é¢åº¦ï¼Œæ˜¯å¦æ‰§è¡Œï¼Ÿ(y/n): ").strip().lower()
        
        if pre_chat in ['y', 'yes', 'æ˜¯', 'Y']:
            execute_pre_conversations()
            break
        elif pre_chat in ['n', 'no', 'å¦', 'N']:
            print("ğŸ“ å¼€å§‹å…¨æ–°å¯¹è¯...")
            break
        else:
            print("âš ï¸  è¯·è¾“å…¥ 'y' è¡¨ç¤ºæ˜¯æˆ– 'n' è¡¨ç¤ºå¦")
    
    print("\nğŸ¯ ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹é—®é¢˜ï¼Œæ‚¨å¯ä»¥ç»§ç»­è·ŸåŠ©æ‰‹å¯¹è¯:")
    for i, question in enumerate(demo_questions(), 1):
      print(f"  {i}. {question}")

    while True:
        user_query = input("\nğŸ¤” è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (æˆ–è¾“å…¥ 'exit' é€€å‡º): ").strip()
        
        if user_query.lower() in ['quit', 'exit', 'q', 'é€€å‡º']:
            print("ğŸ‘‹ æ„Ÿè°¢ä½¿ç”¨å®¶åº­åŠ©æ‰‹ï¼")
            break
        
        if not user_query:
            continue
        
        print("ğŸ¤– æ­£åœ¨å¤„ç†...")
        answer = ai_assistant.chat(user_query, user_id, conversation_id)
        print(f"\nğŸ’¡ [åŠ©æ‰‹]: {answer}\n")
        print("-" * 60)

        previous_messages = ai_assistant.get_messages(user_id, conversation_id)
        print("previous_messages", previous_messages)


if __name__ == "__main__":
    main()
```

## ä»£ç è¯´æ˜

1.  Â åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®æ‚¨çš„MemOSÂ APIç§˜é’¥ä»¥åŠOpenÂ AIç§˜é’¥
    
2.  Â å®ä¾‹åŒ–`WritingAssistant`Â 
    
3.  Â é€‰æ‹©æ˜¯å¦æ‰§è¡Œé¢„è®¾å€¼çš„å¯¹è¯ï¼Œä¼šæ¶ˆè€—2æ¬¡addå’Œ2æ¬¡searchçš„é¢åº¦
    
4.  Â ä½¿ç”¨`main()`å‡½æ•°é€šè¿‡å¯¹è¯å¾ªç¯ä¸åŠ©æ‰‹è¿›è¡Œäº¤äº’
    
5.  Â åŠ©æ‰‹ä¼šè°ƒç”¨Â chatï¼ŒÂ å…ˆæ‰§è¡ŒÂ searchÂ æ£€ç´¢è®°å¿†ï¼Œç„¶åå†è°ƒç”¨OpenAIè¿›è¡Œå¯¹è¯ï¼Œæœ€åæ‰§è¡ŒÂ addÂ å­˜å‚¨è®°å¿†
