---
title: æœ‰è®°å¿†çš„å†™ä½œåŠ©æ‰‹æ›´å¥½ç”¨
---

# æ¦‚è¿°

åœ¨å†™ä½œåŠ©æ‰‹è¿™ç±»äº§å“ä¸­ï¼Œç”¨æˆ·å¾€å¾€å¸Œæœ›åŠ©æ‰‹èƒ½å¤Ÿ**è®°ä½è‡ªå·±çš„å†™ä½œé£æ ¼å’Œä¹ æƒ¯**ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ä»é›¶å¼€å§‹ã€‚

*   **å†™ä½œé£æ ¼**  
    ã€Œå¸®æˆ‘å†™æ€»ç»“çš„æ—¶å€™è¯­æ°”è¦è½»æ¾ä¸€ç‚¹ã€
    
*   **å¸¸ç”¨ä¿¡æ¯**  
    ã€Œè®°ä½æˆ‘åœ¨Â XXÂ å…¬å¸è´Ÿè´£å¸‚åœºéƒ¨ã€
    
*   **å†™ä½œåå¥½**  
    ã€Œä»¥åå†™é‚®ä»¶å¼€å¤´éƒ½è¦åŠ ä¸Šâ€˜å°Šæ•¬çš„å®¢æˆ·â€™ã€
    
*   **ä¸Šä¸‹æ–‡å»¶ç»­**  
    ã€Œæ˜¨å¤©é‚£ä»½æ–¹æ¡ˆæ€»ç»“å†ä¼˜åŒ–ä¸€ä¸‹ï¼ŒåŠ ä¸Šé¢„ç®—éƒ¨åˆ†ã€
    

å¦‚æœæ²¡æœ‰è®°å¿†ï¼Œè¿™äº›ä¿¡æ¯åœ¨ä¼šè¯ç»“æŸåå°±ä¼šä¸¢å¤±ã€‚ç”¨æˆ·ä¸å¾—ä¸åå¤æé†’åŠ©æ‰‹ï¼Œä½“éªŒä¼šæ˜¾å¾—å‰²è£‚ã€ä¸ä¸“ä¸šã€‚

## ä¸ºä»€ä¹ˆä¸ç”¨ä¼ ç»ŸÂ RAGï¼Ÿ

åœ¨å†™ä½œåŠ©æ‰‹åœºæ™¯é‡Œï¼ŒRAGÂ å¹¶ä¸é€‚ç”¨

| ä¼ ç»ŸÂ RAG | MemOS |
| --- | --- |
| ä¾èµ–é™æ€çŸ¥è¯†åº“ï¼Œéœ€è¦äººå·¥ä¸æ–­ç»´æŠ¤æ–‡æ¡£ | å¯¹è¯ä¸­äº§ç”Ÿçš„ä¿¡æ¯å¯ç›´æ¥å†™å…¥ï¼Œæ— éœ€é¢å¤–ç»´æŠ¤ |
| æ£€ç´¢ç»“æœé€šå¸¸æ˜¯é€šç”¨çŸ¥è¯†ç‰‡æ®µ | å¯ä»¥å­˜å‚¨å¹¶è°ƒå–ä¸ªæ€§åŒ–é£æ ¼ã€è¯­æ°”ã€å¸¸ç”¨è¡¨è¾¾ |
| æ›´é€‚åˆâ€œå…¬å¸æ–‡æ¡£/ç™¾ç§‘çŸ¥è¯†â€ç±»åœºæ™¯ | æ›´é€‚åˆâ€œæŒç»­è¿­ä»£ã€ä¸ªæ€§åŒ–â€å†™ä½œåŠ©æ‰‹ |

## ä¸ºä»€ä¹ˆä¸è‡ªå·±é€ è½®å­ï¼Ÿ

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•åœ¨æ•°æ®åº“é‡Œä¿å­˜ç”¨æˆ·åå¥½å’Œä¸Šä¸‹æ–‡ï¼Œä½†è¿™ä¼šå¸¦æ¥å‡ ä¸ªæŒ‘æˆ˜ï¼š

*   **å­˜å‚¨ä¸æ£€ç´¢é€»è¾‘å¤æ‚**ï¼šéœ€è¦åŒºåˆ†æ­£æ–‡ã€åå¥½ã€ç”¨æˆ·ç”»åƒï¼Œå¹¶è®¾è®¡æ£€ç´¢ç­–ç•¥ã€‚
    
*   **å’Œå¤§æ¨¡å‹å¯¹æ¥éº»çƒ¦**ï¼šå­˜ä¸‹æ¥åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œè¿˜è¦åœ¨è°ƒç”¨å¤§æ¨¡å‹å‰æŠŠç›¸å…³ä¿¡æ¯ã€Œæ‹¼è¿›Â Promptã€ã€‚
    
*   **å¯æ‰©å±•æ€§å·®**ï¼šéšç€ç”¨æˆ·éœ€æ±‚å¢åŠ ï¼ˆå†™ä½œé£æ ¼ã€å¸¸ç”¨çŸ­è¯­ã€ä¸Šä¸‹æ–‡å…³è”ï¼‰ï¼Œä»£ç ä¼šè¿…é€Ÿè†¨èƒ€ã€‚
    

## ä¸ºä»€ä¹ˆè¦ç”¨Â MemOSï¼Ÿ

åœ¨åšé€‰å‹æ—¶ï¼Œå¯ä»¥ç›´è§‚å¯¹æ¯”ä¸‰ç§æ–¹æ¡ˆï¼š

| æ–¹æ¡ˆ | ç‰¹ç‚¹ | å±€é™ | MemOSÂ çš„ä¼˜åŠ¿ |
| --- | --- | --- | --- |
| **ä¼ ç»ŸÂ RAG** | é€šè¿‡å‘é‡æ£€ç´¢çŸ¥è¯†åº“æ–‡æ¡£ï¼Œæ‹¼æ¥è¿›Â Prompt | éœ€è¦äººå·¥ç»´æŠ¤é™æ€æ–‡æ¡£ï¼›ä¸é€‚åˆä¸ªæ€§åŒ–å†™ä½œä¹ æƒ¯ | è‡ªåŠ¨æ•æ‰ç”¨æˆ·åœ¨å¯¹è¯ä¸­é€éœ²çš„é£æ ¼ä¸åå¥½ |
| **è‡ªç ”å­˜å‚¨æ–¹æ¡ˆ** | è‡ªå·±å»ºè¡¨/ç¼“å­˜ï¼ŒæŠŠåå¥½ä¸å†…å®¹ä¿å­˜ä¸‹æ¥ | é€»è¾‘å¤æ‚ï¼šè¦åŒºåˆ†æ­£æ–‡/åå¥½/ç”»åƒï¼›è¿˜éœ€æ‰‹åŠ¨æ‹¼Â Promptï¼›æ‰©å±•å›°éš¾ | MemOSÂ å°è£…å­˜å‚¨+æ£€ç´¢+PromptÂ æ³¨å…¥ï¼Œå‡å°‘å¼€å‘è´Ÿæ‹… |
| **MemOS** | ä¸¤ä¸ªæ¥å£å³å¯ï¼š`addMessage`Â å†™å…¥ã€`searchMemory`Â æ£€ç´¢ | â€”â€” | æ”¯æŒé•¿æœŸè¿½è¸ªå†™ä½œé£æ ¼ã€å¤ç”¨å¸¸ç”¨ä¿¡æ¯ï¼›å¼€ç®±å³ç”¨ã€æ˜“æ‰©å±• |

## æœ¬æ¡ˆä¾‹ä¼šå±•ç¤ºä»€ä¹ˆï¼Ÿ

æœ¬æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•ç”¨Â MemOSÂ äº‘æœåŠ¡ï¼Œå¿«é€Ÿå®ç°ä¸€ä¸ªâ€œä¼šè®°ä½ç”¨æˆ·â€çš„å†™ä½œåŠ©æ‰‹ã€‚

åœ¨è¿™ä¸ªÂ DemoÂ ä¸­ï¼Œç”¨æˆ·å¯èƒ½ä¼šï¼š

*   äº¤ä»£åå¥½ï¼šã€Œå¸®æˆ‘å†™æ€»ç»“çš„æ—¶å€™è¯­æ°”è¦è½»æ¾ä¸€ç‚¹ã€
    
*   é‡ç”¨èƒŒæ™¯ï¼šã€Œè®°ä½æˆ‘åœ¨Â XXÂ å…¬å¸è´Ÿè´£å¸‚åœºéƒ¨ã€
    
*   è¿­ä»£ä»»åŠ¡ï¼šã€Œæ˜¨å¤©é‚£ä»½æ–¹æ¡ˆæ€»ç»“å†ä¼˜åŒ–ä¸€ä¸‹ï¼ŒåŠ ä¸Šé¢„ç®—éƒ¨åˆ†ã€
    

æœ‰äº†Â MemOSï¼Œå†™ä½œåŠ©æ‰‹å°±èƒ½ï¼š

1.  **å»¶ç»­é£æ ¼**ï¼šä¿æŒç”¨æˆ·è¦æ±‚çš„è¯­æ°”å’Œæ ¼å¼ä¸€è‡´ã€‚
    
2.  **é‡ç”¨ä¿¡æ¯**ï¼šè‡ªåŠ¨å¸¦å…¥ç”¨æˆ·å¸¸ç”¨çš„èƒŒæ™¯ä¿¡æ¯ã€‚
    
3.  **å¿«é€Ÿè¿­ä»£**ï¼šåŸºäºå·²æœ‰å†…å®¹ç»§ç»­ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ¨å€’é‡æ¥ã€‚
    

è¿è¡Œè¿™ä¸ªæ¡ˆä¾‹è„šæœ¬æ—¶ï¼Œå¼€å‘è€…ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ï¼š

*   æ¯æ¬¡è°ƒç”¨Â `addMessage`Â å’ŒÂ `searchMemory`Â çš„è¯·æ±‚/å“åº”
    
*   è¢«æ£€ç´¢å‡ºæ¥çš„å†™ä½œé£æ ¼ã€èƒŒæ™¯ä¿¡æ¯ç­‰è®°å¿†
    
*   æ¨¡å‹ç”Ÿæˆçš„æœ€ç»ˆå›ç­”ï¼ˆè‹¥æœªæ¥å…¥å¤§æ¨¡å‹ï¼Œåˆ™ä¼šæç¤ºã€æœªæ¥å…¥å¤§æ¨¡å‹ã€‘ï¼‰
    

# Â ç¤ºä¾‹

## ç¯å¢ƒå‡†å¤‡

ä½¿ç”¨pipå®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹

```shell
pip install MemoryOS -U
```

## å®Œæ•´ä»£ç 

```python
import os
from openai import OpenAI
from memos.api.client import MemOSClient

os.environ["MEMOS_API_KEY"] = "mpg-xx"
os.environ["OPEN_API_KEY"] = "sk-xx"

class WritingAssistant:
    """AIå†™ä½œåŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·å†™ä½œï¼Œå…·å¤‡è®°å¿†èƒ½åŠ›"""
    
    def __init__(self):
        self.memos_client = MemOSClient(api_key=os.getenv("MEMOS_API_KEY"))
        self.openai_client = OpenAI(api_key=os.getenv("OPEN_API_KEY"))
    
    def search_memories(self, query, user_id, conversation_id):
        """æ ¹æ®æŸ¥è¯¢æœç´¢ç›¸å…³è®°å¿†"""
        response = self.memos_client.search(query, user_id, conversation_id)
        return [m['memoryValue'] for m in response.data.memoryDetailList]

    def build_system_prompt(self, memories):
        """æ„å»ºåŒ…å«æ ¼å¼åŒ–è®°å¿†çš„ç³»ç»Ÿæç¤º"""
        base_prompt = """
          ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„çš„å†™ä½œåŠ©æ‰‹, èƒ½å¤Ÿè®°ä½ç”¨æˆ·çš„å†™ä½œé£æ ¼å’Œåå¥½ã€‚
          ä½ å¯è°ƒç”¨å¯¹è¯è®°å¿†ï¼ŒåŠ©åŠ›æä¾›æ›´å…·ä¸ªæ€§åŒ–çš„å›å¤ã€‚
          è¯·å€ŸåŠ©è¿™äº›è®°å¿†ï¼Œç†è§£ç”¨æˆ·çš„åœºæ™¯èƒŒæ™¯ã€åå¥½å€¾å‘åŠè¿‡å¾€äº’åŠ¨æƒ…å†µã€‚
          å¦‚æœæä¾›äº†è®°å¿†ï¼Œè¯·åœ¨ç›¸å…³æ—¶è‡ªç„¶åœ°å¼•ç”¨å®ƒä»¬ï¼Œä½†ä¸è¦æ˜ç¡®æåŠæ‹¥æœ‰è®°å¿†åŠŸèƒ½
        """

        if memories:
            # å°†è®°å¿†æ ¼å¼åŒ–ä¸ºç¼–å·åˆ—è¡¨
            formatted_memories = "## è®°å¿†:\n"
            for i, memory in enumerate(memories, 1):
                formatted_memories += f"{i}. {memory}\n"
            
            return f"{base_prompt}\n\n{formatted_memories}"
        else:
            return base_prompt
        

    def add_messages(self, messages, user_id, conversation_id):
        self.memos_client.add(messages, user_id, conversation_id)

    def get_messages(self, user_id, conversation_id):
        response = self.memos_client.get_messages(user_id, conversation_id)
        return response.data.messageDetailList

    def chat(self, query, user_id, conversation_id):
        """å¤„ç†åŒ…å«è®°å¿†é›†æˆçš„å¯¹è¯çš„ä¸»è¦èŠå¤©å‡½æ•°"""
        # 1. æœç´¢ç›¸å…³è®°å¿†
        memories = self.search_memories(query, user_id, conversation_id)
        
        # æ„å»ºåŒ…å«è®°å¿†çš„ç³»ç»Ÿæç¤º
        system_prompt = self.build_system_prompt(memories)
        
        # 2. ä½¿ç”¨OpenAIç”Ÿæˆå›ç­”
        response = self.openai_client.chat.completions.create(
            model="gpt-4o",
            messages=[
                {"role": "system", "content": system_prompt},
                {"role": "user", "content": query}
            ]
        )
        answer = response.choices[0].message.content

        # 3. å°†å¯¹è¯ä¿å­˜åˆ°è®°å¿†ä¸­
        messages = [
            {"role": "user", "content": query},
            {"role": "assistant", "content": answer}
        ]
        self.memos_client.add(messages, user_id, conversation_id)
        
        return answer

ai_assistant = WritingAssistant()
user_id = "memos_writing_user_123"
conversation_id = "memos_writing_conversation_123"

def demo_questions():
    return [
      "å†™å°äº§å“ä»‹ç»é‚®ä»¶",
      "ä½ è®°å¾—æˆ‘çš„å†™ä½œé£æ ¼å§ï¼Œè¿™æ¬¡ä¼šè®®çºªè¦æ€ä¹ˆå†™ï¼Ÿ",
      "è¿˜è®°å¾—æ˜¨å¤©é‚£ä»½æ¨å¹¿æ–¹æ¡ˆå—ï¼Ÿå¸®æˆ‘åŠ ä¸Šé¢„ç®—éƒ¨åˆ†",
    ]

def pre_configured_conversations():
    """è¿”å›é¢„é…ç½®çš„å¯¹è¯å¯¹"""
    return [
        {
            "user": "æˆ‘åœ¨äº’è”ç½‘å…¬å¸å¸‚åœºéƒ¨å·¥ä½œï¼Œå†™æ€»ç»“æ—¶è¯­æ°”è¦è½»æ¾ç‚¹ï¼Œå†™é‚®ä»¶å¼€å¤´åŠ 'å°Šæ•¬çš„å®¢æˆ·'",
            "description": "å·¥ä½œä¿¡æ¯å’Œå†™ä½œé£æ ¼è®¾ç½®"
        },
        {
            "user": "æˆ‘æ˜¨å¤©å†™äº†ä»½å¸‚åœºæ¨å¹¿æ–¹æ¡ˆï¼Œä»Šå¤©æƒ³ç»§ç»­ä¼˜åŒ–ï¼Œè®°ä½æˆ‘ä»¬ä¹‹å‰çš„è®¨è®ºå†…å®¹",
            "description": "ä¸Šä¸‹æ–‡å»¶ç»­è®¾ç½®"
        }
    ]

def execute_pre_conversations():
    """æ‰§è¡Œé¢„é…ç½®çš„å¯¹è¯"""
    conversations = pre_configured_conversations()
    
    print("\nğŸ”„ æ­£åœ¨æ‰§è¡Œé¢„é…ç½®å¯¹è¯...")
    print("=" * 60)
    
    for i, conv in enumerate(conversations, 1):
        print(f"\nğŸ’¬ å¯¹è¯ {i}: {conv['description']}")
        print(f"ğŸ‘¤ ç”¨æˆ·: {conv['user']}")
        
        # æ‰§è¡Œå¯¹è¯
        answer = ai_assistant.chat(conv['user'], user_id, conversation_id)
        print(f"ğŸ¤– åŠ©æ‰‹: {answer}")
        print("-" * 40)
    
    print("\nâœ… é¢„é…ç½®å¯¹è¯æ‰§è¡Œå®Œæ¯•ï¼")
    print("=" * 60)

def main():
    print("ğŸ“ æ¬¢è¿æŸ¥çœ‹MemOSåœ¨å†™ä½œåŠ©æ‰‹ä¸­çš„ä½¿ç”¨ç¤ºä¾‹ï¼")
    print("ğŸ’¡ åœ¨MemOSçš„åŠ æŒä¸‹ï¼Œè®©æ‚¨çš„å†™ä½œåŠ©æ‰‹æ›´æ‡‚æ‚¨çš„é£æ ¼å’Œåå¥½ï¼ âœï¸ \n")
    
    # è¯¢é—®ç”¨æˆ·æ˜¯å¦è¦å…ˆæ‰§è¡Œé¢„é…ç½®å¯¹è¯
    while True:
        pre_chat = input("ğŸ¤” æ‚¨æƒ³å…ˆæ‰§è¡Œé¢„é…ç½®å¯¹è¯å—ï¼Ÿé¢„è®¡æ¶ˆè€—2æ¬¡addå’Œ2æ¬¡searchçš„è°ƒç”¨é¢åº¦ï¼Œæ˜¯å¦æ‰§è¡Œï¼Ÿ(y/n): ").strip().lower()
        
        if pre_chat in ['y', 'yes', 'æ˜¯', 'Y']:
            execute_pre_conversations()
            break
        elif pre_chat in ['n', 'no', 'å¦', 'N']:
            print("ğŸ“ å¼€å§‹å…¨æ–°çš„å†™ä½œåŠ©æ‰‹å¯¹è¯...")
            break
        else:
            print("âš ï¸  è¯·è¾“å…¥ 'y' è¡¨ç¤ºæ˜¯æˆ– 'n' è¡¨ç¤ºå¦")
    
    print("\nğŸ¯ ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹é—®é¢˜ï¼Œæ‚¨å¯ä»¥ç»§ç»­è·Ÿå†™ä½œåŠ©æ‰‹å¯¹è¯:")
    for i, question in enumerate(demo_questions(), 1):
      print(f"  {i}. {question}")

    while True:
        user_query = input("\nğŸ¤” è¯·è¾“å…¥æ‚¨çš„å†™ä½œéœ€æ±‚ (æˆ–è¾“å…¥ 'exit' é€€å‡º): ").strip()
        
        if user_query.lower() in ['quit', 'exit', 'q', 'é€€å‡º']:
            print("ğŸ‘‹ æ„Ÿè°¢ä½¿ç”¨å†™ä½œåŠ©æ‰‹ï¼Œç¥æ‚¨å†™ä½œæ„‰å¿«ï¼")
            break
        
        if not user_query:
            continue
        
        print("ğŸ¤– æ­£åœ¨åˆ›ä½œ...")
        answer = ai_assistant.chat(user_query, user_id, conversation_id)
        print(f"\nğŸ’¡ [å†™ä½œåŠ©æ‰‹]: {answer}\n")
        print("-" * 60)


if __name__ == "__main__":
    main()
```

## ä»£ç è¯´æ˜

1.  Â åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®æ‚¨çš„MemOSÂ APIç§˜é’¥ä»¥åŠOpenÂ AIç§˜é’¥
    
2.  Â å®ä¾‹åŒ–`WritingAssistant`Â 
    
3.  Â é€‰æ‹©æ˜¯å¦æ‰§è¡Œé¢„è®¾å€¼çš„å¯¹è¯ï¼Œä¼šæ¶ˆè€—2æ¬¡addå’Œ2æ¬¡searchçš„é¢åº¦
    
4.  Â ä½¿ç”¨`main()`å‡½æ•°é€šè¿‡å¯¹è¯å¾ªç¯ä¸åŠ©æ‰‹è¿›è¡Œäº¤äº’
    
5.  Â åŠ©æ‰‹ä¼šè°ƒç”¨Â chatï¼ŒÂ å…ˆæ‰§è¡ŒÂ searchÂ æ£€ç´¢è®°å¿†ï¼Œç„¶åå†è°ƒç”¨OpenAIè¿›è¡Œå¯¹è¯ï¼Œæœ€åæ‰§è¡ŒÂ addÂ å­˜å‚¨è®°å¿†
