---
title: 记忆生产
---

# 能力介绍：为什么要将原始消息加工为记忆

在 MemOS 里，你提交的是 **原始消息**（用户与 AI 的对话），系统会自动完成“记忆化”的过程。

::note{icon="ri:triangular-flag-fill"}
**为什么要进行记忆加工？**
::

如果只是简单地把原始对话全部保存，再次使用时直接丢给大模型，会出现几个问题：

- **上下文过长**：原始消息往往冗长、重复，把整段上下文都传给模型既低效，又浪费 Token；
- **检索不精准**：没有加工的原始文本难以快速定位关键信息，检索往往会召回大量噪音；
- **调用成本高**：直接拼接原始消息会显著增加模型输入长度，带来 Token 成本和延迟。


::note
**加工后有什么不同？**
::

MemOS 会把原始消息转化为结构化记忆单元，自动提炼：

- **关键事实**：如“用户在旅行时通常是全家出游（带孩子和父母）”；
- **任务线索**：提炼出用户的目标意图，比如“规划一次家庭旅游”，而不仅仅是“暑假出去玩”。
- **用户偏好**：
  - 不仅是显式表述（“我喜欢全家出游”），还包括隐含的推理范式。
  - 例如，如果用户在 让AI给10 篇文章评分过程中，展现出“偏向逻辑清晰的写法”，那么在未来的 20 篇文章评分任务中，MemOS 会保留这种偏好模式，引导模型保持一致性；

这样一来：

- **检索更快更准**：直接定位到事实 / 偏好 / 任务，而不是一整段原始消息。
- **调用更高效**：拼接给大模型时只需传递精炼记忆，减少 Token 消耗。
- **体验更稳定**：模型能持续保持对用户习惯的理解，不会因上下文丢失而偏离。


**例子**：

```json
User：我想暑假出去玩，你能帮我推荐下吗？
AI：好的！是自己出行还是和家人朋友一起呢？
User：肯定要带孩子啊，我们家出门都是全家一起。
AI：明白了，所以你们是父母带孩子一块儿旅行，对吗？
User：对，带上孩子和老人，一般都是全家行动。
AI：收到，那我会帮你推荐适合家庭出游的目的地。
```

```json
记忆：用户在旅行时通常是全家出游（带孩子和父母）
元数据：时间戳=2025-06-10，来源=对话A……
```

> 对你来说，这意味着：只要存原始对话，不必自己写“关键词提取”或“意图识别”的逻辑，就能得到可被长期调用的用户偏好。


# 进阶：如果你想做深度定制

在 MemOS 中，**记忆生产**是将原始输入加工为可调度、可检索的记忆单元的全过程。具体的流水线细节（如抽取方式、嵌入模型、存储后端）会随着版本和社区实践不断演进——因此，本节不提供固定的唯一流程，而是说明 **可扩展的环节**，你可以根据需求在这些位置上动手。

| **可扩展点举例** | **默认行为**                                        | **可定制方式**                                                               |
| ---------------- | --------------------------------------------------- | ---------------------------------------------------------------------------- |
| 抽取与结构化     | 默认会生成 MemoryItem（包含内容、时间戳、来源等）。 | 可以替换抽取模型或模板，或在 schema 中增加领域字段。                         |
| 切分与嵌入       | 系统会对长文本切分并送入嵌入模型。                  | 可以调整切分粒度，或替换为更适合的 embedding 模型（如 bge、e5）。            |
| 存储后端         | 默认使用向量数据库（如 Qdrant）。                   | 可切换为图数据库，或混合使用两者。                                           |
| 合并与治理       | 系统会自动处理重复与冲突                            | 可以编写自定义规则（如时间优先、来源优先），或增加治理逻辑（去重、过滤等）。 |

# 下一步行动

了解MemOS更多核心能力

- [《记忆调度》](/overview/quick_start/mem_schedule)
- [《记忆召回与指令补全》](/overview/quick_start/mem_recall)
- [《记忆生命周期管理》](/overview/quick_start/mem_lifecycle)

# 联系我们

![image.png](https://cdn.memtensor.com.cn/img/1758251354703_v1nwkz_compressed.png)
